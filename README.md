# crypto-kakutei
総平均法に基づく暗号通貨の確定申告用スクリプトです。**以下の注意事項をよくお読みになってからご利用ください。**

暗号資産の確定申告における取得価格の計算には、総平均法または移動平均法が用いられますが、個人の場合事前の届け出がない場合、総平均法が適用されます。詳しくは[国税庁: 暗号資産に関する税務上の取扱い及び計算書について（令和3年12月）](https://www.nta.go.jp/publication/pamph/shotoku/kakuteishinkokukankei/kasoutuka/)の計算例（たとえば4ページ）をご確認ください。

# 注意事項
* このレポジトリに含まれるプログラムの開発者およびコントリビュータは、不正確な確定申告による税務上のトラブル、もしくは本プログラムが招いたいかなる損害についても責任を追うことはありませんを負いません。
* 必ずご自身の責任のもとに計算結果を確認してください。
* とくに、暗号資産に関する税務上の取り扱いは年々変化しておりますので必ず[国税庁: 暗号資産に関する税務上の取扱い及び計算書について（令和3年12月）](https://www.nta.go.jp/publication/pamph/shotoku/kakuteishinkokukankei/kasoutuka/)を御覧ください。

# 使い方
```python
manager = PeriodicAveraged("xrp")

# 2017年に 200.0 jpy/xrp で 500 xrp 購入 (100000円)
manager.register_buy(2017, 200.0, 500)
# 2017年に 250.0 jpy/xrp で 100 xrp 売却 (25000円)
manager.register_sell(2017, 250.0, 100)

manager.register_sell(2021, 80.0, 300)
manager.register_buy(2021, 60.0, 50)


# Prints: {2017: 5000.0, 2018: 0.0, 2019: 0.0, 2020: 0.0, 2021: -31333.333333333336}
print(manager.get_profits())
```



# コントリビュータを募集しています
本プログラムの信頼を高めるためにも、プログラマの方、税に詳しい方の協力を募集しています。
プログラムのバグ等を発見された方はぜひissueにて報告してください。